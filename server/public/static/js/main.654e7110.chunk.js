(this.webpackJsonppoll=this.webpackJsonppoll||[]).push([[0],{108:function(e,t){},111:function(e,t,n){"use strict";n.r(t);var a,o=n(0),l=n.n(o),r=n(47),c=n.n(r),i=(n(57),n(58),n(6)),s=n(2),u=n(9),m=n(7),p=n.n(m),d=n(14),f=n.n(d),A=function(e){return l.a.createElement("div",{className:f.a.container},e.id?l.a.createElement("input",{className:f.a.input,onChange:function(t){return e.handler(e.id,t)},value:e.title}):l.a.createElement("input",{className:f.a.input,onChange:e.handler,value:e.title}))},v=n(8),E=n.n(v),g=n(48),h=n.n(g),C=function(){var e=Object(o.useState)({title:""}),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)({options:[]}),c=Object(u.a)(r,2),m=c[0],d=c[1],f=function(e,t){var n,a=Object(s.a)({},m),o=Object(i.a)(a.options);try{for(o.s();!(n=o.n()).done;){var l=n.value;if(l.id===e){l.title=t.target.value;break}}}catch(r){o.e(r)}finally{o.f()}d(a)};return l.a.createElement("div",{className:E.a.container},l.a.createElement("h1",null,"Create Poll"),l.a.createElement("label",null,"Poll Title:"),l.a.createElement(A,{handler:function(e){var t=Object(s.a)({},n);t.title=e.target.value,a(t)},title:n.title}),l.a.createElement("div",{className:E.a.add},l.a.createElement("label",null,"Options:"),l.a.createElement("div",null,m.options.map((function(e){return l.a.createElement(A,{key:e.id,id:e.id,handler:f,title:e.title})}))),l.a.createElement("div",{className:E.a.commands},l.a.createElement("button",{className:E.a.Btn,onClick:function(){var e=Object(s.a)({},m),t={id:h()(),title:"",votes:0};e.options.push(t),d(e)}},"+"),l.a.createElement("button",{className:E.a.Btn,onClick:function(){console.log(n.title,m.options);var e={title:n.title,options:m.options};p.a.post("/api/poll/",e).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)})),a({title:""}),d({options:[]})}},"Submit"))))},S=n(10),b=n.n(S),O=n(23),w=n(49),k=n.n(w),I=n(50),B=n.n(I),P=n(3),N=n.n(P),y=new l.a.createContext({vote:function(){}}),L=function(e){var t=Object(o.useContext)(y),n=parseFloat(parseInt(e.votes)/parseInt(e.sum)*100).toFixed(1),a={width:n+"%"};if(null!==localStorage.getItem("marked")){var r,c=JSON.parse(localStorage.marked),s=Object(i.a)(c);try{for(s.s();!(r=s.n()).done;){if(r.value===e.ID)return l.a.createElement("div",{className:N.a.offContainer,style:a},l.a.createElement("div",{className:N.a.stat},n,"%"),l.a.createElement("div",{className:N.a.title},e.title))}}catch(u){s.e(u)}finally{s.f()}return l.a.createElement("div",{className:N.a.container,onClick:function(){return t.vote(e.title,e.ID)}},l.a.createElement("div",{className:N.a.stat},e.votes),l.a.createElement("div",{className:N.a.title},e.title))}return l.a.createElement("div",{className:N.a.container,onClick:function(){return t.vote(e.title,e.ID)}},l.a.createElement("div",{className:N.a.stat},e.votes),l.a.createElement("div",{className:N.a.title},e.title))},j=n(15),R=n.n(j),D=n(51),V=n.n(D),G=function(e){var t,n=0,a=Object(i.a)(e.options);try{for(a.s();!(t=a.n()).done;){var o=t.value;n+=parseInt(o.votes)}}catch(r){a.e(r)}finally{a.f()}return l.a.createElement("div",{className:R.a.container},l.a.createElement("h2",null,e.title),l.a.createElement("img",{alt:"CloseBtn",src:V.a,className:R.a.close,onClick:function(){return e.rmPoll(e.ID)}}),l.a.createElement("div",{className:R.a.optionsContainer},e.options.map((function(t,a){return l.a.createElement(L,{key:a,ID:e.ID,title:t.title,votes:t.votes,sum:n})}))))},J=function(){var e=Object(o.useState)({error:null,isLoaded:!1,pollArray:null}),t=Object(u.a)(e,2),n=t[0],r=t[1];Object(o.useEffect)((function(){function e(){return(e=Object(O.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.a.get("/api/poll/").then((function(e){var t=e.data;t.reverse(),r({error:!1,isLoaded:!0,pollArray:t})})).catch((function(e){r({error:e,isLoaded:!0,pollArray:null})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a=B()(),function(){e.apply(this,arguments)}()}),[]),Object(o.useEffect)((function(){return a.on("voteCasted",(function(e){var t=e;t.reverse(),r(Object(s.a)(Object(s.a)({},n),{},{pollArray:t}))})),a.on("newPoll",(function(e){var t=e;t.reverse(),r((function(e){return Object(s.a)(Object(s.a)({},e),{},{pollArray:t})}))})),a.on("pollListSent",(function(e){void 0!==e&&null!==e&&localStorage.setItem("marked",e)})),a.on("pollRemoved",(function(e){var t=e;t.reverse(),r((function(e){return Object(s.a)(Object(s.a)({},e),{},{pollArray:t})}))})),function(){a.off("voteCasted"),a.off("newPoll"),a.off("pollListSent"),a.off("pollRemoved")}}));var c=function(){var e=Object(O.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.a.delete("/api/poll/rm/"+t).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.error?l.a.createElement("h1",null,n.error.message):n.isLoaded?l.a.createElement(y.Provider,{value:{vote:function(e,t){p.a.post("/api/poll/"+t,{optionTitle:e}).then((function(e){if(console.log(e.data.message),void 0===localStorage.marked)localStorage.setItem("marked",JSON.stringify([t]));else{var n=JSON.parse(localStorage.marked);n.push(t),localStorage.setItem("marked",JSON.stringify(n))}})).catch((function(e){console.log(e)}))}}},l.a.createElement("div",{className:k.a.container},l.a.createElement("h1",null,"Recent Polls"),n.pollArray.map((function(e){return l.a.createElement(G,{rmPoll:c,key:e._id,title:e.title,options:e.options,ID:e._id})})))):l.a.createElement("h1",null,"Loading ...")},Y=function(){return l.a.createElement("div",{className:"LayoutContainer"},l.a.createElement(C,null),l.a.createElement(J,null))};var Q=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(Y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},14:function(e,t,n){e.exports={container:"Input_container__SDDmJ",label:"Input_label__3atXj",input:"Input_input__3jMg0"}},15:function(e,t,n){e.exports={container:"Poll_container__3r6FE",optionsContainer:"Poll_optionsContainer__2qsu0",close:"Poll_close__1gxCo"}},3:function(e,t,n){e.exports={container:"Option_container__1ICml",stat:"Option_stat__eAzNu",title:"Option_title__1enRN",offContainer:"Option_offContainer__PHgOD"}},49:function(e,t,n){e.exports={container:"PollList_container__qLcIb"}},51:function(e,t){e.exports="data:image/png;base64,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"},52:function(e,t,n){e.exports=n(111)},57:function(e,t,n){},58:function(e,t,n){},8:function(e,t,n){e.exports={container:"Cockpit_container__1YOcl",add:"Cockpit_add__2IAdD",commands:"Cockpit_commands__2v8Al",Btn:"Cockpit_Btn__3ugxw"}}},[[52,1,2]]]);
//# sourceMappingURL=main.654e7110.chunk.js.map